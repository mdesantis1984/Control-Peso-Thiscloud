@namespace ControlPeso.Web.Components.Shared

<AuthorizeView>
    <Authorized>
        <MudBadge Content="@_unreadNotificationCount"
                  Color="Color.Error" 
                  Overlap="true" 
                  Class="@Class"
                  Visible="@(_unreadNotificationCount > 0)">
            <MudIconButton Icon="@Icons.Material.Filled.Notifications" 
                           Color="Color.Inherit"
                           OnClick="@ToggleNotificationPanel"
                           aria-label="Notifications" />
        </MudBadge>

        <!-- Notification Panel Popover -->
        <NotificationPanel IsOpen="@_notificationPanelOpen" 
                           IsOpenChanged="@((bool open) => _notificationPanelOpen = open)"
                           OnUnreadCountChanged="@UpdateUnreadCount" />
    </Authorized>
</AuthorizeView>
